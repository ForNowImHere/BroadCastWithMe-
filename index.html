<!DOCTYPE html>
<html>
<head>
  <title>Secure Auth</title>
  <style>
    body { font-family: sans-serif; background: #111; color: white; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; }
    input, button { margin: 8px; padding: 10px; font-size: 16px; }
  </style>
</head>
<body>
  <h2>Login to Broadcast</h2>
  <input id="user" placeholder="Username">
  <input id="pass" placeholder="Password" type="password">
  <input id="code" placeholder="One-time Code">
  <button onclick="connect()">Login</button>
  <p id="status"></p>

  <script>
    function connect() {
      const ws = new WebSocket("wss://c9c0e85af4a2.ngrok-free.app");
      const status = document.getElementById("status");

      ws.onopen = () => {
        ws.send(JSON.stringify({
          username: document.getElementById("user").value,
          password: document.getElementById("pass").value,
          code: document.getElementById("code").value
        }));
      };

      ws.onmessage = event => {
        const data = JSON.parse(event.data);
        if (data.type === "request_auth") return; // ignore
        status.textContent = data.message;
        if (data.success) status.style.color = "lightgreen";
        else status.style.color = "red";
      };

      ws.onerror = () => {
        status.textContent = "Connection error.";
        status.style.color = "red";
      };
    }
  </script>
</body>
</html>
